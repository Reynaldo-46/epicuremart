{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-user-edit"></i> Edit Courier Profile</h2>
        <a href="{{ url_for('courier_dashboard') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>

    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Company Information</h5>
                </div>
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        <!-- Company Logo -->
                        <div class="mb-4 text-center">
                            <label class="form-label fw-bold">Company Logo</label>
                            <div class="mb-3">
                                {% if user.company_logo %}
                                <img src="{{ url_for('static', filename='uploads/' + user.company_logo) }}" 
                                     alt="Company Logo" 
                                     class="img-thumbnail mb-2" 
                                     style="max-width: 200px; max-height: 200px;">
                                {% else %}
                                <div class="bg-light border rounded p-4 mb-2">
                                    <i class="fas fa-building fa-4x text-muted"></i>
                                    <p class="text-muted mt-2">No logo uploaded</p>
                                </div>
                                {% endif %}
                            </div>
                            <input type="file" name="company_logo" class="form-control" accept="image/*">
                            <small class="text-muted">Upload your company logo (PNG, JPG, JPEG, GIF, WEBP)</small>
                        </div>

                        <!-- Company Name -->
                        <div class="mb-3">
                            <label class="form-label fw-bold">Company Name *</label>
                            <input type="text" name="company_name" class="form-control" 
                                   value="{{ user.company_name or '' }}" 
                                   placeholder="e.g., J&T Express, Lalamove, NinjaVan" 
                                   required>
                        </div>

                        <!-- Contact Person -->
                        <div class="mb-3">
                            <label class="form-label fw-bold">Contact Person Name</label>
                            <input type="text" name="full_name" class="form-control" 
                                   value="{{ user.full_name or '' }}" 
                                   placeholder="Full name of contact person">
                        </div>

                        <!-- Email -->
                        <div class="mb-3">
                            <label class="form-label fw-bold">Email *</label>
                            <input type="email" name="email" class="form-control" 
                                   value="{{ user.email }}" 
                                   required>
                        </div>

                        <!-- Phone -->
                        <div class="mb-3">
                            <label class="form-label fw-bold">Contact Number *</label>
                            <input type="tel" name="phone" class="form-control" 
                                   value="{{ user.phone or '' }}" 
                                   placeholder="+63 912 345 6789" 
                                   required>
                        </div>

                        <!-- Vehicle Type -->
                        <div class="mb-3">
                            <label class="form-label fw-bold">Primary Vehicle Type</label>
                            <select name="vehicle_type" class="form-select">
                                <option value="">-- Select Vehicle Type --</option>
                                <option value="motorcycle" {% if user.vehicle_type == 'motorcycle' %}selected{% endif %}>Motorcycle</option>
                                <option value="car" {% if user.vehicle_type == 'car' %}selected{% endif %}>Car</option>
                                <option value="van" {% if user.vehicle_type == 'van' %}selected{% endif %}>Van</option>
                                <option value="truck" {% if user.vehicle_type == 'truck' %}selected{% endif %}>Truck</option>
                            </select>
                        </div>

                        <!-- Address -->
                        <div class="mb-3">
                            <label class="form-label fw-bold">Company Address</label>
                            <textarea name="company_address" class="form-control" rows="3" 
                                      placeholder="Full company address">{{ user.company_address or '' }}</textarea>
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            <label class="form-label fw-bold">About Your Company</label>
                            <textarea name="company_description" class="form-control" rows="4" 
                                      placeholder="Describe your courier services, coverage areas, specializations, etc.">{{ user.company_description or '' }}</textarea>
                            <small class="text-muted">This will be visible to sellers and customers</small>
                        </div>

                        <!-- Profile Picture (Optional) -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">Profile Picture (Optional)</label>
                            <div class="mb-2">
                                {% if user.profile_picture %}
                                <img src="{{ url_for('static', filename='uploads/' + user.profile_picture) }}" 
                                     alt="Profile Picture" 
                                     class="rounded-circle" 
                                     style="width: 100px; height: 100px; object-fit: cover;">
                                {% endif %}
                            </div>
                            <input type="file" name="profile_picture" class="form-control" accept="image/*">
                            <small class="text-muted">Personal photo for chat and communications</small>
                        </div>

                        <!-- Submit Button -->
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
